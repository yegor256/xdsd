<!DOCTYPE html><html><head><link rel="icon" type="image/gif" href="http://img.xdsd.org/favicon.gif"><link rel="shortcut icon" href="http://img.xdsd.org/favicon.gif"/><link rel="alternate" type="application/rss+xml" title="RSS" href="http://www.xdsd.org/rss"/><link rel="author" href="https://plus.google.com/u/0/114792568016408327418?rel=author"/><meta name="description" content="PDD, or Puzzle Driven Development, is a method used to break down programming tasks into smaller ones and enable their implementation in parallel. The PDD method is used widely in XDSD methodology. The method is pending a USPTO patent (application no. 12/840,306).
"/><meta name="keywords" content=""/><meta name="viewport" content="width=device-width"/><link href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet"><link rel="stylesheet" href="/css/layout.css"/><title>Puzzle Driven Development</title></head><body> <section class="container"> <aside class="left"><div class="title"> Puzzle Driven Development</div><div class="author"><div class="photo"> <img src="http://www.gravatar.com/avatar/70942ffdd8084b5a51e17e3c0996d53c?s=300" class="icon" alt="photo of the author"/></div><div class="name"> Yegor Bugayenko<br/> 4 March 2009</div></div><ul class="signs"><li> <a class="share" target="_blank" onclick="return !window.open(this.href, 'Facebook', 'width=640,height=300')" style="color:#44619c" href="http://www.facebook.com/sharer/sharer.php?u=http://www.xdsd.org/pdd"><i class="fa fa-facebook-square"></i></a> <a class="share" target="_blank" onclick="return !window.open(this.href, 'Twitter', 'width=640,height=300')" style="color:#509abf" href="https://twitter.com/share?url=http://www.xdsd.org/pdd&amp;text=Puzzle+Driven+Development"><i class="fa fa-twitter-square"></i></a> <a class="share" target="_blank" onclick="return !window.open(this.href, 'Google+', 'width=640,height=300')" style="color:#d42020" href="https://plus.google.com/share?url=http://www.xdsd.org/pdd"><i class="fa fa-google-plus-square"></i></a> <a class="share" target="_blank" style="color:#f60" href="http://feedburner.google.com/fb/a/mailverify?uri=xdsd&amp;loc=en_US"><i class="fa fa-rss-square"></i></a></li><li> <a href="/"> <img src="http://img.xdsd.org/logo.png" style="width:30px" alt="XDSD logo"/> <strong>eXtremely Distributed</strong><br/><div class="soft-style">Software Development</div> </a></li><li> 860.506.5536<br/> <a href="mailto:join@xdsd.org">join@xdsd.org</a></li></ul> </aside> <article class="content"><div class="post"><p>PDD, or Puzzle Driven Development, is a method used to break down programming tasks into smaller ones and enable their implementation in parallel. The PDD method is used widely in XDSD methodology. The method is pending a USPTO patent (application no. <a href="http://www.google.com/patents/US20120023476">12/840,306</a>).</p><p>Let's review the method with an example. Say, for instance, you are a programmer and have been tasked to design and implement a Java class. This is the formal task description: "class <code>DBWriter</code> has to extend <code>java.io.Writer</code> abstract class and save all incoming data into the database".</p><p>You have one hour to implement this task. It is obvious to you that one hour is not enough because the problem is much bigger and requires more work than the slotted time allows. Additionally, there are a numerous unknowns:</p><ul><li>What information do we need to save, and in what format?</li><li>What is the DB schema? Is it an SQL or NoSQL database?</li><li>How to connect to the DB? JDBC? JPA? DAO?</li><li>How to handle exceptions?</li></ul><p>Let's keep all these unknowns in mind as we try to solve the problem on the highest level of abstraction. Of course, we start with a test:</p><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="java"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">org.junit.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">org</span><span class="o">.</span><span class="na">mockito</span><span class="o">.</span><span class="na">Mockito</span><span class="o">.*;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DBWriterTest</span> <span class="o">{</span>
  <span class="nd">@Test</span>
  <span class="kt">void</span> <span class="nf">testSavesDataIntoDatabase</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">DataBridge</span> <span class="n">mapper</span> <span class="o">=</span> <span class="n">mock</span><span class="o">(</span><span class="n">DataBridge</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
    <span class="n">Writer</span> <span class="n">writer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">DBWriter</span><span class="o">(</span><span class="n">mapper</span><span class="o">);</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">writer</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="s">"hello, world!"</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
      <span class="n">writer</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="n">verify</span><span class="o">(</span><span class="n">mapper</span><span class="o">).</span><span class="na">insert</span><span class="o">(</span><span class="s">"hello, world!"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></pre></div></td></tr></table><p>In the above test, we define the expected behavior of the class. The test fails to compile because there are two missing classes: <code>DataBridge</code> and <code>DBWriter</code>. Let's implement the bridge first:</p><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="java">1
2
3
4</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">interface</span> <span class="nc">DataBridge</span> <span class="o">{</span>
  <span class="kt">void</span> <span class="nf">insert</span><span class="o">(</span><span class="n">String</span> <span class="n">text</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span><span class="o">;</span>
<span class="o">}</span></pre></div></td></tr></table><p>Next, the writer itself:</p><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="java"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.Writer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.utils.Arrays</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">DBWriter</span> <span class="kd">implements</span> <span class="n">Writer</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">DataBridge</span> <span class="n">bridge</span><span class="o">;</span>
  <span class="kd">public</span> <span class="nf">DBWriter</span><span class="o">(</span><span class="n">DataBridge</span> <span class="n">brdg</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">bridge</span> <span class="o">=</span> <span class="n">brdg</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kt">void</span> <span class="nf">flush</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
  <span class="o">}</span>
  <span class="nd">@Override</span>
  <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="kt">char</span><span class="o">[]</span> <span class="n">cbuf</span><span class="o">,</span> <span class="kt">int</span> <span class="n">off</span><span class="o">,</span> <span class="kt">int</span> <span class="n">len</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">copyOfRange</span><span class="o">(</span><span class="n">cbuf</span><span class="o">,</span> <span class="n">off</span><span class="o">,</span> <span class="n">off</span> <span class="o">+</span> <span class="n">len</span><span class="o">));</span>
    <span class="k">this</span><span class="o">.</span><span class="na">bridge</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span></pre></div></td></tr></table><p>Using the above code, we solve the problem. In the example, we successfully designed, implemented and tested the required <code>DBWriter</code> class. Subsequently, the class can now immediately can be used "as is" by other classes.</p><p>Of course, the implementation is not finished, since we are not writing anything to the database. Furthermore, we still aren't answering the majority of questions asked in the sample scneario. For instance, we still don't know exactly how the database needs to be connected, its type (SQL or NoSQL,) the correct data format and so on. However, we've already made a number of important architectural assumptions, which allowed us to implement the class and make it usable by other classes.</p><p>Now it's time to identify the unknowns in our code and mark them with puzzles. Every puzzle is a request for refinement. We want to ask someone else to help us refine and correct our assumptions. Here is the first puzzle we need to add:</p><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="java"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">DataBridge</span> <span class="o">{</span>
  <span class="cm">/**</span>
<span class="cm">   * @todo #123 I assumed that a simple insert() method will be</span>
<span class="cm">   *  enough to insert data into the database. Maybe it's</span>
<span class="cm">   *  not true, and some sort of transaction support may be</span>
<span class="cm">   *  required. We should implement this interface and create</span>
<span class="cm">   *  an integration test with a database.</span>
<span class="cm">   */</span>
  <span class="kt">void</span> <span class="nf">insert</span><span class="o">(</span><span class="n">String</span> <span class="n">text</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
  <span class="o">}</span>
<span class="o">}</span></pre></div></td></tr></table><p>The puzzle has three elements: <code>@todo</code> tag, <code>#123</code> locator and a comment. Locator displays the following: "The puzzle was created while working with ticket #123".</p><p>Letâ€™s add one more puzzle:</p><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><code class="java">1
2
3
4
5
6
7
8</code></pre></div></td><td class="code"><div class="highlight"><pre><span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="kt">char</span><span class="o">[]</span> <span class="n">cbuf</span><span class="o">,</span> <span class="kt">int</span> <span class="n">off</span><span class="o">,</span> <span class="kt">int</span> <span class="n">len</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
  <span class="c1">// @todo #123 I assumed that the data should be sent to the database</span>
  <span class="c1">//  as its received by the writer. Maybe this assumption</span>
  <span class="c1">//  is wrong and we should aggregate data into blocks/chunks</span>
  <span class="c1">//  and then send them to the data bridge.</span>
  <span class="n">String</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="n">Arrays</span><span class="o">.</span><span class="na">copyOfRange</span><span class="o">(</span><span class="n">cbuf</span><span class="o">,</span> <span class="n">off</span><span class="o">,</span> <span class="n">off</span> <span class="o">+</span> <span class="n">len</span><span class="o">));</span>
  <span class="k">this</span><span class="o">.</span><span class="na">bridge</span><span class="o">.</span><span class="na">insert</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
<span class="o">}</span></pre></div></td></tr></table><p>This puzzle indicates one of our concerns because we are not sure that the architectural decision is right. Actually, the design is very primitive at the moment and very likely to be incorrect. To refine it and refactor, we require more information from the task specifier.</p><p>The task is finished. Now, you can reintegrate your branch into <code>master</code> and return the ticket to whoever assigned it to you. His task now is to find other people who will be able to resolve the puzzles we just created.</p><p>Every puzzle created now will produce other puzzles, which will be resolved by other people. Consequtly, our simple one-hour task can potentially generate hundreds of other tasks, which may take days or even years to complete. Nevertheless, your goal of working with your specific task is to finish it as soon as possible and reintegrate your branch into <code>master</code>.</p><h2 id="toc_0">Best Practices</h2><p>There are a few simple rules that help you to place puzzles correctly.</p><p>First, you should put your <code>@todo</code> annotations at the point where your code hits a stub. For example, in a unit test. You're implementing a test and it fails because the class has not yet been implemented. You skip the test with the <code>@Ignore</code> annotation and add a <code>@todo</code> puzzle to its Javadoc.</p><p>Second, your puzzle should remain as near as possible to the code element that is hitting the stub. Say thay you have a unit test that has three test methods. All of them fail now because the class has not been implemented. The best approach would be to ignore every one of them and create three (!) puzzles. Each one of the puzzles should explain what you expect from the class and how it should be implemented.</p><p>Third, be as descriptive as possible. Your puzzle will soon be a task definition for someone else. So, explain clearly what you expect the next person to implement, how to do it, which documentation to use and so on and so forth. There should be enough information present that the next person assigned to the puzzles is ables implement your required classes without additional input from you!</p></div><div id="disqus_thread" style="margin-top:3em"></div> <script>var disqus_shortname="xdsd";!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+disqus_shortname+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></article> </section> <script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-1963507-16"]),_gaq.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script></body></html>